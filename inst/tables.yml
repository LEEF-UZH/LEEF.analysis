bemovi_mag_16_morph:
  FROM: bemovi_mag_16__morph_mvt
  SELECT: "*"
  SQL: ~
bemovi_mag_16:
  FROM: bemovi_mag_16__mean_density_per_ml
  SELECT: "*"
  SQL: ~
bemovi_mag_25_morph:
  FROM: bemovi_mag_25__morph_mvt
  SELECT: "*"
  SQL: ~
bemovi_mag_25:
  FROM: bemovi_mag_25__mean_density_per_ml
  SELECT: "*"
  SQL: ~
bemovi_mag_25_cropped_morph:
  FROM: bemovi_mag_25__morph_mvt_cropped
  SELECT: "*"
  SQL: ~
bemovi_mag_25_cropped:
  FROM: bemovi_mag_25__mean_density_per_ml_cropped
  SELECT: "*"
  SQL: ~
flowcam_traits:
  FROM: flowcam__algae_traits
  SELECT: "*"
  SQL: ~
flowcam:
  FROM: flowcam__algae_density
  SELECT: "*"
  SQL: ~
flowcytometer:
  FROM: flowcytometer__flowcytometer
  SELECT: "*"
  SQL: ~
manualcount:
  FROM: manualcount__manualcount
  SELECT: "*"
  SQL: ~
o2meter:
  FROM: o2meter__o2meter
  SELECT: "*"
  SQL: ~
  

bottles_per_timestamp:
  FROM: ~
  SELECT: ~
  SQL: 
    SELECT
       timestamp, bottle, "bemovi_mag_16" AS measurement
     FROM
       bemovi_mag_16__mean_density_per_ml
     UNION ALL
     SELECT
       timestamp, bottle,  "bemovi_mag_16_morph" AS measurement
     FROM
       bemovi_mag_16__morph_mvt
     UNION ALL
     SELECT
       timestamp, bottle,  "bemovi_mag_25" AS measurement
     FROM
       bemovi_mag_25__mean_density_per_ml
     UNION ALL
     SELECT
       timestamp, bottle,  "bemovi_mag_25_morph" AS measurement
     FROM
       bemovi_mag_25__morph_mvt
     UNION ALL
     SELECT
       timestamp, bottle,  "bemovi_mag_25_cropped" AS measurement
     FROM
       bemovi_mag_25__mean_density_per_ml_cropped
     UNION ALL
     SELECT
       timestamp, bottle,  "bemovi_mag_25_cropped_morph" AS measurement
     FROM
       bemovi_mag_25__morph_mvt_cropped
     UNION ALL
     SELECT
       timestamp, bottle,  "flowcam" AS measurement
     FROM
       flowcam__algae_density
     UNION ALL
     SELECT
       timestamp, bottle,  "flowcam_traits" AS measurement
     FROM
       flowcam__algae_traits
     UNION ALL
     SELECT
       timestamp, bottle,  "flowcytometer" AS measurement
     FROM
       flowcytometer__flowcytometer
    UNION ALL
     SELECT
       timestamp, bottle,  "manualcount" AS measurement
     FROM
       manualcount__manualcount
    UNION ALL
     SELECT
       timestamp, bottle,  "o2meter" AS measurement
     FROM
       o2meter__o2meter
       
       
       
no_species_per_bottle:
  FROM: ~
  SELECT: ~
  SQL: 
    SELECT 
      measurement,
      timestamp,
      bottle,
      COUNT(species) AS no_species
    FROM (
      SELECT
          "bemovi_mag_16_morph" AS measurement,
          timestamp,
            bottle,
        species,
            -1 AS min_density,
            -1 AS max_density
      FROM
            bemovi_mag_16__morph_mvt
      GROUP BY
          timestamp,
            bottle,
        species
      )
    GROUP BY
      timestamp,
      bottle
    UNION ALL

    SELECT 
      measurement,
      timestamp,
      bottle,
      COUNT(species) AS no_species
    FROM (
      SELECT
          "bemovi_mag_16" AS measurement,
          timestamp,
            bottle,
        species,
            MIN(density) AS min_density,
            MAX(density) AS max_density
      FROM
            bemovi_mag_16__mean_density_per_ml
      WHERE
        density > 0
      GROUP BY
          timestamp,
            bottle,
        species
      )
    GROUP BY
      timestamp,
      bottle
    UNION ALL
    
    SELECT 
      measurement,
      timestamp,
      bottle,
      COUNT(species) AS no_species
    FROM (
      SELECT
          "bemovi_mag_25_morph" AS measurement,
          timestamp,
            bottle,
        species,
            -1 AS min_density,
            -1 AS max_density
      FROM
            bemovi_mag_25__morph_mvt
      GROUP BY
          timestamp,
            bottle,
        species
      )
    GROUP BY
      timestamp,
      bottle
    UNION ALL

    SELECT 
      measurement,
      timestamp,
      bottle,
      COUNT(species) AS no_species
    FROM (
      SELECT
          "bemovi_mag_25" AS measurement,
          timestamp,
            bottle,
        species,
            MIN(density) AS min_density,
            MAX(density) AS max_density
      FROM
            bemovi_mag_25__mean_density_per_ml
      WHERE
        density > 0
      GROUP BY
          timestamp,
            bottle,
        species
      )
    GROUP BY
      timestamp,
      bottle
    UNION ALL

    SELECT 
      measurement,
      timestamp,
      bottle,
      COUNT(species) AS no_species
    FROM (
      SELECT
          "bemovi_mag_25_cropped_morph" AS measurement,
          timestamp,
            bottle,
        species,
            -1 AS min_density,
            -1 AS max_density
      FROM
            bemovi_mag_25__morph_mvt_cropped
      GROUP BY
          timestamp,
            bottle,
        species
      )
    GROUP BY
      timestamp,
      bottle
    UNION ALL

    SELECT 
      measurement,
      timestamp,
      bottle,
      COUNT(species) AS no_species
    FROM (
      SELECT
          "bemovi_mag_25_cropped" AS measurement,
          timestamp,
            bottle,
        species,
            MIN(density) AS min_density,
            MAX(density) AS max_density
      FROM
            bemovi_mag_25__mean_density_per_ml_cropped
      WHERE
        density > 0
      GROUP BY
          timestamp,
            bottle,
        species
      )
    GROUP BY
      timestamp,
      bottle
    UNION ALL
    
    SELECT 
      measurement,
      timestamp,
      bottle,
      COUNT(species) AS no_species
    FROM (
      SELECT
          "flowcam" AS measurement,
          timestamp,
            bottle,
        species,
            MIN(density) AS min_density,
            MAX(density) AS max_density
      FROM
            flowcam__algae_density
      WHERE
        density > 0
      GROUP BY
          timestamp,
            bottle,
        species
      )
    GROUP BY
      timestamp,
      bottle
    UNION ALL    

    SELECT 
      measurement,
      timestamp,
      bottle,
      COUNT(species) AS no_species
    FROM (
      SELECT
          "flowcam_traits" AS measurement,
          timestamp,
            bottle,
        species,
            -1 AS min_density,
            -1 AS max_density
      FROM
            flowcam__algae_traits
      GROUP BY
          timestamp,
            bottle,
        species
      )
    GROUP BY
      timestamp,
      bottle
    UNION ALL    

    SELECT 
      measurement,
      timestamp,
      bottle,
      COUNT(name) AS no_species
    FROM (
      SELECT
          "flowcytometer" AS measurement,
          timestamp,
            bottle,
        name,
            MIN(density) AS min_density,
            MAX(density) AS max_density
      FROM
            flowcytometer__flowcytometer
      WHERE
        density > 0
      GROUP BY
          timestamp,
            bottle,
        name
      )
    GROUP BY
      timestamp,
      bottle
    UNION ALL    

    SELECT 
      measurement,
      timestamp,
      bottle,
      COUNT(species) AS no_species
    FROM (
      SELECT
          "manualcount" AS measurement,
          timestamp,
            bottle,
        species,
            MIN(density) AS min_density,
            MAX(density) AS max_density
      FROM
            manualcount__manualcount
      WHERE
        density > 0
      GROUP BY
          timestamp,
            bottle,
        species
      )
    GROUP BY
      timestamp,
      bottle




species_names_per_bottle:
  FROM: ~
  SELECT: ~
  SQL: 
    SELECT 
      "bemovi_mag_16" AS measurement,
      timestamp,
      bottle,
      species,
      COUNT(density) AS no_points,
      AVG(density) AS avg_density
    FROM 
      bemovi_mag_16__mean_density_per_ml
    WHERE
        density > 0
    GROUP BY
      timestamp,
      bottle,
      species
    UNION ALL	
    SELECT 
      "bemovi_mag_25" AS measurement,
      timestamp,
      bottle,
      species,
      COUNT(density) AS no_points,
      AVG(density) AS avg_density
    FROM 
      bemovi_mag_25__mean_density_per_ml
    WHERE
        density > 0
    GROUP BY
      timestamp,
      bottle,
      species
    UNION ALL	
    SELECT 
      "bemovi_mag_25" AS measurement,
      timestamp,
      bottle,
      species,
      COUNT(density) AS no_points,
      AVG(density) AS avg_density
    FROM 
      bemovi_mag_25__mean_density_per_ml_cropped
    WHERE
        density > 0
    GROUP BY
      timestamp,
      bottle,
      species
    UNION ALL	
    SELECT 
      "flowcam" AS measurement,
      timestamp,
      bottle,
      species,
      COUNT(density) AS no_points,
      AVG(density) AS avg_density
    FROM 
      flowcam__algae_density
    WHERE
        density > 0
    GROUP BY
      timestamp,
      bottle,
      species
    UNION ALL	
    SELECT 
      "flowcytometer" AS measurement,
      timestamp,
      bottle,
      name AS species,
      COUNT(density) AS no_points,
      AVG(density) AS avg_density
    FROM 
      flowcytometer__flowcytometer
    WHERE
        density > 0
    GROUP BY
      timestamp,
      bottle,
      name
    UNION ALL	
    SELECT 
      "manualcount" AS measurement,
      timestamp,
      bottle,
      species,
      COUNT(density) AS no_points,
      AVG(density) AS avg_density
    FROM 
      manualcount__manualcount
    WHERE
        density > 0
    GROUP BY
      timestamp,
      bottle,
      species












