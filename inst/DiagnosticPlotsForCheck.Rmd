---
title: "Diagnostic plots for the RRD ``r params$db``"
author: "Rainer M Krug"
date: "`r Sys.time()`"
output: 
  pdf_document:
    fig_width: 10
    fig_height: 10
  html_document:
    fig_width: 10
    fig_height: 10
params:
  db: "~/Desktop/LEEF.RRD.sqlite"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(LEEF.analysis)
```
## Invocation from commandline
See [https://stackoverflow.com/questions/49904943/run-rmarkdown-with-arguments-on-the-command-line#49908054](https://stackoverflow.com/questions/49904943/run-rmarkdown-with-arguments-on-the-command-line#49908054) on how to implement the invocation in a script in the `local_pipeline_management` repo.

```{bash info_invocation, eval = FALSE}
Rscript -e '
db <- "~/Desktop/LEEF.RRD.sqlite"
rmarkdown::render(
  input = system.file("DiagnosticPlotsForCheck.Rmd", package = "LEEF.analysis"),
  params = list(db = db),
  output_file = file.path(dirname(db), "Diagnostic_plot.html")
)
'
```

\pagebreak

## Check Bottles per Measurement per Timestep

This plot shows, if a `bottle` is present for the `measurement` for the timesteamps analysed. Each `measurement` is a panes. Missing dots indicate missing datapoints for the `bottle` at the `measurement` for the `timestamp`.

```{r bottles_per_timestamp}
plot_bottles_per_timestamp(params$db)
```

\pagebreak

## Number of Species per timestamp

This plot shows the 
```{r no_species_per_measurement}
plot_no_species_per_bottle_per_timestamp(params$db)
```
